import{w as r}from"./index.D3RRlZuQ.js";import{x as s}from"./scheduler.BngOVlp-.js";const a=r("/"),o=r(""),h=r([]),u=r([]),d=r([]);async function f(){const e=await(await fetch(`${s(a)}users`,{headers:{Authorization:`Bearer ${s(o)}`}})).json();h.set(e)}async function l(){console.log("getPredictions"),console.log("token",s(o));try{const t=new Headers;t.set("Authorization",`Bearer ${s(o)}`);const e=await fetch(s(a)+"predictions/",{headers:t});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json(),i=new Date(Date.now()-24*60*60*1e3),c=n.filter(w=>new Date(w.finished)>=i);u.set(c)}catch(t){console.error(t)}}async function g(){try{const t=new Headers;t.set("Authorization",`Bearer ${s(o)}`);const e=await fetch(s(a)+"tokens",{headers:t});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();d.set(n)}catch(t){console.error(t)}}async function p(){o.set(localStorage.getItem("token")||""),await f(),await l(),await g(),setTimeout(p,5e3)}export{a,l as g,u as p,o as t,h as u,p as w};
